<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Generate_Sales_quote</name>
        <label>Generate Sales quote</label>
        <locationX>176</locationX>
        <locationY>1943</locationY>
        <actionName>GenerateSalesQuotePdf</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>update_Triggering_record</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>quoteId</name>
            <value>
                <elementReference>quote.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientEmail</name>
            <value>
                <elementReference>$Record.Contact_Email__c</elementReference>
            </value>
        </inputParameters>
        <nameSegment>GenerateSalesQuotePdf</nameSegment>
    </actionCalls>
    <apiVersion>61.0</apiVersion>
    <assignments>
        <name>assign_contract_category</name>
        <label>assign contract category</label>
        <locationX>176</locationX>
        <locationY>755</locationY>
        <assignmentItems>
            <assignToReference>contType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>contractCategory</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opportunity_Assignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>OppLIne</name>
        <label>OppLIne</label>
        <locationX>176</locationX>
        <locationY>1187</locationY>
        <assignmentItems>
            <assignToReference>OLI.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Price_book_Entry.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OLI.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OLI.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OLI.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OLI.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Product2.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OLI.Asset__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_OLI</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Opportunity_Assignment</name>
        <label>Opportunity Assignment</label>
        <locationX>176</locationX>
        <locationY>863</locationY>
        <assignmentItems>
            <assignToReference>OppNew.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.CloseDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Comprehensive_Warranty_End_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Contact.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Department__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Service_Department_L__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Division__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Serviceable_Division__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Contract_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>RPC</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Ease_AMC__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Pricebook2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Price_Book.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Record_type.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.StageName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Prospecting</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.SBQQ__QuotePricebookId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Price_Book.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Contract_Category__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>contType</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>AMC</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Terms_of_Payment_Customer__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Yearly Advance</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Terms_of_Payment_Dealer__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Yearly Advance</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Industry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Industry</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Sub_Industry__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Sub_Segment__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Branch__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Branch__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Branch_Commericial__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.Branch_Commercial__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Area_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.Service_AM__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Regional_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.Service_RM__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.All_India_Head__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.AISDH__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Regional_Commercial_Head__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.Regional_Commercial_Head__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Central_Commercial_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.Central_Commercial_Manager__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.All_India_Commericial_Head__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.Serviceable_Division__r.AIDH__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.AMC_Head__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.SMH__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.LeadSource</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>FSL App</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.SME__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Branch_department.SME__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.CBO__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.BSL_CBO</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.CP__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.CP__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Channel_Partner_Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.CP__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Channel_Partner_Code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.CP__r.CP_Code__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Channel_Partner_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Asset.CP__r.CP_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.SubStatus__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Not Contacted</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppNew.Plant__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_associated_ware_house.Warehouse__r.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_New_Opp</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>qli_Instance</name>
        <label>qli Instance</label>
        <locationX>176</locationX>
        <locationY>1727</locationY>
        <assignmentItems>
            <assignToReference>QLI.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OLI.Product2.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QLI.Asset__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OLI.Asset__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QLI.QuoteId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>quote.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QLI.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OLI.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QLI.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OLI.PricebookEntryId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QLI.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>create_QLI_record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Quote_Instance</name>
        <label>Quote Instance</label>
        <locationX>176</locationX>
        <locationY>1511</locationY>
        <assignmentItems>
            <assignToReference>quote.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Proposed_Period_From__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Propstart</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Proposed_Period_To__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PropEnd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Pricebook2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Price_Book.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Division__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Division__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Department__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Department__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Customer_Segment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Industry__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Customer_Sub_Segment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Sub_Industry__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.CP__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.CP__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.BSL_SME__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.SME__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.BSL_AM__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Area_Manager__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.BSL_RM__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Regional_Manager__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.BSL_AIDH__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.All_India_Head__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Contact.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingCity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingCity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingCountry</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingCountry</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingCountryCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingCountryCode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingGeocodeAccuracy</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingGeocodeAccuracy</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingLatitude</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingLatitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingLongitude</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingLongitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingPostalCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingPostalCode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingState</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingState</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.ShippingStreet</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingStreet</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Plant__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Plant__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Contract_Catgory__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Conversion</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Billing_Frequency_Period_CP__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Monthly</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Branch__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppNew.Branch__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Quote_record_type.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>quote.Generate_Quote_Pdf__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Quote</targetReference>
        </connector>
    </assignments>
    <environments>Default</environments>
    <formulas>
        <name>contractCategory</name>
        <dataType>String</dataType>
        <expression>IF(
    AND(
        ISPICKVAL({!$Record.Asset.Asset_Type__c}, &quot;Non BlueStar&quot;),
        {!$Record.Asset.Asset_Obligation__c}==&quot;NIC&quot;,
        {!$Record.Asset.Acquisition__c} = &apos;True&apos;
    ),
    &quot;Acquisition - Others&quot;,
    
    IF(
        AND(
            NOT(ISPICKVAL({!$Record.Asset.Asset_Type__c}, &quot;Non BlueStar&quot;)),
            {!$Record.Asset.Acquisition__c} = &apos;True&apos;,
            {!$Record.Asset.Asset_Obligation__c}==&quot;NIC&quot;
        ),
        &quot;Acquisition - BSL&quot;,

        IF(
            AND(
                NOT(ISPICKVAL({!$Record.Asset.Asset_Type__c}, &quot;Non BlueStar&quot;)),
                {!$Record.Asset.Asset_Obligation__c}==&quot;NIC&quot;,
                {!$Record.Asset.Acquisition__c} = &apos;False&apos;,
                NOT(ISBLANK({!$Record.Asset.AMC_start_Date__c})),
                NOT(ISBLANK({!$Record.Asset.AMC_end_Date__c}))
            ),
            &quot;Retention&quot;,

            IF(
                AND(
                    NOT(ISPICKVAL({!$Record.Asset.Asset_Type__c}, &quot;Non BlueStar&quot;)),
                    {!$Record.Asset.Asset_Obligation__c}== &quot;NIC&quot;,
                    {!$Record.Asset.Acquisition__c} = &apos;False&apos;,
                    ISBLANK({!$Record.Asset.AMC_start_Date__c}),
                    ISBLANK({!$Record.Asset.AMC_end_Date__c}),
                    NOT(ISBLANK({!$Record.Asset.Standard_Warranty_Start_Date__c})),
                    NOT(ISBLANK({!$Record.Asset.Standard_Warranty_End_Date__c}))
                ),
                &quot;Conversion&quot;,

                IF(
                    AND(
                        NOT(ISPICKVAL({!$Record.Asset.Asset_Type__c}, &quot;Non BlueStar&quot;)),
                        {!$Record.Asset.Asset_Obligation__c}==&quot;Warranty&quot;
                    ),
                    &quot;Conversion&quot;,

                    IF(
                        AND(
                            NOT(ISPICKVAL({!$Record.Asset.Asset_Type__c}, &quot;Non BlueStar&quot;)),
                            {!$Record.Asset.Asset_Obligation__c}==&quot;AMC&quot;
                        ),
                        &quot;Retention&quot;,
                        &quot;&quot;
                    )
                )
            )
        )
    )
)</expression>
    </formulas>
    <formulas>
        <name>OppName</name>
        <dataType>String</dataType>
        <expression>&apos;AMC Renewal Opportunity &apos;+ &apos; &apos; + {!$Record.Account.FirstName} + &apos; &apos; + Text(TODAY())</expression>
    </formulas>
    <formulas>
        <name>PropEnd</name>
        <dataType>Date</dataType>
        <expression>Today()+10</expression>
    </formulas>
    <formulas>
        <name>Propstart</name>
        <dataType>Date</dataType>
        <expression>Today()</expression>
    </formulas>
    <interviewLabel>AMT Coupon Offline  Triggered Flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>AMT Coupon Offline  Triggered Flow</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_New_Opp</name>
        <label>Create New Opp</label>
        <locationX>176</locationX>
        <locationY>971</locationY>
        <connector>
            <targetReference>get_Price_book_Entry</targetReference>
        </connector>
        <inputReference>OppNew</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_OLI</name>
        <label>Create OLI</label>
        <locationX>176</locationX>
        <locationY>1295</locationY>
        <connector>
            <targetReference>get_Quote_record_type</targetReference>
        </connector>
        <inputReference>OLI</inputReference>
    </recordCreates>
    <recordCreates>
        <name>create_QLI_record</name>
        <label>create  QLI record</label>
        <locationX>176</locationX>
        <locationY>1835</locationY>
        <connector>
            <targetReference>Generate_Sales_quote</targetReference>
        </connector>
        <inputReference>QLI</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Quote</name>
        <label>Create Quote</label>
        <locationX>176</locationX>
        <locationY>1619</locationY>
        <connector>
            <targetReference>qli_Instance</targetReference>
        </connector>
        <inputReference>quote</inputReference>
    </recordCreates>
    <recordLookups>
        <name>get_associated_ware_house</name>
        <label>get associated ware house</label>
        <locationX>176</locationX>
        <locationY>647</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>assign_contract_category</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Branch_Department__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Branch_department.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Associated_Warehouse__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Branch_department</name>
        <label>Get Branch department</label>
        <locationX>176</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Record_type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Branch__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Asset.Branch__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Department__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Asset.Service_Department_L__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Branch_Division__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Price_Book</name>
        <label>get Price Book</label>
        <locationX>176</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_associated_ware_house</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Department__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Asset.Service_Department_L__r.Department_Number__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Contract_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>RPC</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Pricebook2</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Price_book_Entry</name>
        <label>get Price book Entry</label>
        <locationX>176</locationX>
        <locationY>1079</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>OppLIne</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Product2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Asset.Product2.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>get_Price_Book.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Quote_record_type</name>
        <label>get Quote record type</label>
        <locationX>176</locationX>
        <locationY>1403</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Quote_Instance</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AMC</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Quote</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Record_type</name>
        <label>get Record type</label>
        <locationX>176</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Price_Book</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>AMC</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Opportunity</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_Triggering_record</name>
        <label>update Triggering record</label>
        <locationX>176</locationX>
        <locationY>2051</locationY>
        <inputAssignments>
            <field>IsOffline__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Branch_department</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>IsOffline__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>IsOffline__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>WorkOrder</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>contType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OLI</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>OppNew</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>QLI</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>QuoteLineItem</objectType>
    </variables>
    <variables>
        <name>quote</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Quote</objectType>
    </variables>
</Flow>
